import React, {Component} from 'react'import './CourierPanel.scss'import DeliveryPanel from './AdditionalComponents/DeliveryPanel'import OrdersList from './AdditionalComponents/OrdersList'import DeliveredOrder from './AdditionalComponents/DeliveredOrder'import MiniPreloader from '../UI/Preloaders/MiniPrleloader'export default class CourierPanel extends Component {    state = {        position: localStorage.getItem('position') ? JSON.parse(localStorage.getItem('position')) : '',        coordinate: localStorage.getItem('coordinate') ? JSON.parse(localStorage.getItem('coordinate')) : [],        positionIsValid: true,    }    changePosition = async (position) => {        const answer = await window.ymaps.geocode(position)        await this.setState({            positionIsValid: position.replace(/\s+/g, '') !== '' || answer.geoObjects.get(0) !== undefined,        })        if (this.state.positionIsValid) {            const coordinate = answer.geoObjects.get(0).geometry.getCoordinates()            this.setState({position, coordinate})            localStorage.setItem('position', JSON.stringify(position))            localStorage.setItem('coordinate', JSON.stringify(coordinate))        }    }    renderOrderInfo = (deliveredOrder) => {        return (            <ul className={'courier-panel__delivered-info'}>                <li className={'mb-15'}>Откуда: {deliveredOrder.name}</li>                <li className={'mb-15'}>Адресс доставки: {deliveredOrder.clientAddress}</li>                <li className={'mb-15'}>Имя клиента: {deliveredOrder.clientName}</li>                <li className={'mb-15'}>Контактный телефон: {deliveredOrder.clientNumberPhone}</li>                <li className={'mb-15'}>Время начала заказа: {deliveredOrder.startTime}</li>                {                    deliveredOrder.orderValue                        ?                        <>                            <li className={'mb-15'}>Стоимость заказа: {deliveredOrder.orderValue} ₽</li>                            <li className={'mb-15'}>Стоимость доставки: {deliveredOrder.deliveryValue} ₽</li>                            <li className={'mb-15'}>                                <b>Итого: {parseInt(deliveredOrder.deliveryValue) + parseInt(deliveredOrder.orderValue)} ₽</b>                            </li>                        </>                        : null                }            </ul>        )    }    render() {        return (            <div className={'courier-panel'}>                {                    this.props.courierStatus === 0 || this.props.courierStatus === -1                        ? <OrdersList                            changePosition={this.changePosition}                            position={this.state.position}                            positionIsValid={this.state.positionIsValid}                            coordinate={this.state.coordinate}                            fetchOrderList={this.props.fetchOrderList}                            subscribeUsers={this.props.subscribeUsers}                            ordersList={this.props.ordersList}                            changeOrderData={this.props.changeOrderData}                        />                        : this.props.courierStatus === 1                        ? <DeliveredOrder                            ordersList={this.props.ordersList}                            interactWithPurchased={this.props.interactWithPurchased}                            renderOrderInfo={this.renderOrderInfo}                            changeOrderData={this.props.changeOrderData}                            subscribeOrderInfo={this.props.subscribeOrderInfo}                        />                        : this.props.courierStatus === 2                            ? <DeliveryPanel                                ordersList={this.props.ordersList}                                calculateThePrice={this.props.calculateThePrice}                                renderOrderInfo={this.renderOrderInfo}                                changeOrderData={this.props.changeOrderData}                                changePosition={this.changePosition}                                position={this.state.position}                                positionIsValid={this.state.positionIsValid}                                coordinate={this.state.coordinate}                            />                            : <MiniPreloader/>                }            </div>        )    }}// <div className={'dropdown'}>//     <div className="dropdown__content">//         <span className={'dropdown__item'}>Купил</span>//         <span className={'dropdown__item'}>Нет в наличии</span>//     </div>// </div>